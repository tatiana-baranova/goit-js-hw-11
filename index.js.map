{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["export default getImages;\n\nfunction getImages(query) {\nconst API_KEY = \"47418994-53b3f5e850acd57effb8c0e9d\";\n    const BASE_URL = 'https://pixabay.com/api/';\n    \n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n    });\n\n    return fetch(`${BASE_URL}?${params}`)\n    .then((res) => {\n        if (!res.ok) {\n            throw new Error(res.statusText);\n        }\n        return res.json();\n    })\n        .catch(error => {\n            iziToast.error({\n                title: \"Error\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: 'topRight',\n        })\n    })\n}\n","export default reflectionImages;\nfunction reflectionImages(images) {\n    return images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <a class=\"gallery-item\" href=\"${largeImageURL}\">\n    <div class=\"gallery-image\">\n    <img class=\"image\" src=\"${webformatURL}\" alt=\"${tags}\">\n    <div>\n    <ul class=\"description\">\n    <li class=\"list-info\">\n    <h3 class=\"info-img\">Likes</h3>\n    <p class=\"text-img\">${likes}</p>\n    </li>\n    <li class=\"list-info\">\n    <h3 class=\"info-img\">Views</h3>\n    <p class=\"text-img\">${views}</p>\n    </li>\n    <li class=\"list-info\">\n    <h3 class=\"info-img\">Comments</h3>\n    <p class=\"text-img\">${comments}</p>\n    </li>\n    <li class=\"list-info\">\n    <h3 class=\"info-img\">Downloads</h3>\n    <p class=\"text-img\">${downloads}</p>\n    </li>\n    </ul>\n    </div>\n    </div>\n    </a>\n    `).join(\"\");\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport \"./js/pixabay-api.js\";\nimport getImages from \"./js/pixabay-api.js\";\n\nimport \"./js/render-function.js\";\nimport reflectionImages from \"./js/render-function.js\";\n\nconst formSearch = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\"#loader\");\n\nlet lightbox = new SimpleLightbox(\".gallery-item\", {\n    captions: true,\n    captionSelector: \"img\",\n    captionType: \"attr\",\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nformSearch.addEventListener(\"submit\", handleSearch);\n\nfunction handleSearch(event) {\n    event.preventDefault();\n    const query = event.target.elements.searchQuery.value.trim();\n    \n    if (!query) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Please enter a search query!\",\n            position: \"topRight\",\n        });\n        event.target.reset();\n        return;\n    }\n    gallery.innerHTML = \"\";\n    // console.log(\"Before showing loader:\", loader.classList);\n    if (loader.classList.contains(\"hidden\")) {\n        loader.classList.replace(\"hidden\", \"loader\");\n    } else {\n        loader.classList.add(\"loader\");\n    }\n    // console.log(\"After showing loader:\", loader.classList);\n\n    getImages(query)\n        .then(data => {\n            if (data.hits.length === 0) {\n                iziToast.info({\n                    title: \"No results\",\n                    message: \"Sorry, no images found!\",\n                    position: \"topRight\",\n                });\n                return;\n            }\n            const markup = reflectionImages(data.hits);\n            gallery.innerHTML = markup;\n            lightbox.refresh();\n        })\n        .catch(error => {\n            iziToast.error({\n                title: \"Error\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: 'topRight',\n            });\n        })\n        .finally(() => {\n            // console.log(\"Before hiding loader:\", loader.classList);\n            if (loader.classList.contains(\"loader\")) {\n                loader.classList.replace(\"loader\", \"hidden\");\n            } else {\n                loader.classList.add(\"hidden\");\n            }\n            // console.log(\"After hiding loader:\", loader.classList);\n\n            event.target.reset();\n        });\n}\n"],"names":["getImages","query","API_KEY","BASE_URL","params","res","error","reflectionImages","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formSearch","gallery","loader","lightbox","SimpleLightbox","handleSearch","event","iziToast","data","markup"],"mappings":"6vBAEA,SAASA,EAAUC,EAAO,CAC1B,MAAMC,EAAU,qCACNC,EAAW,2BAEXC,EAAS,IAAI,gBAAgB,CAC/B,IAAKF,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAED,OAAO,MAAM,GAAGE,CAAQ,IAAIC,CAAM,EAAE,EACnC,KAAMC,GAAQ,CACX,GAAI,CAACA,EAAI,GACL,MAAM,IAAI,MAAMA,EAAI,UAAU,EAElC,OAAOA,EAAI,MACnB,CAAK,EACI,MAAMC,GAAS,CACZ,SAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,UAC1B,CAAS,CACT,CAAK,CACL,CC3BA,SAASC,EAAiBC,EAAQ,CAC9B,OAAOA,EAAO,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA,oCAChEL,CAAa;AAAA;AAAA,8BAEnBD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,0BAK9BC,CAAK;AAAA;AAAA;AAAA;AAAA,0BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,0BAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAM9B,EAAE,KAAK,EAAE,CACd,CClBA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAW,IAAIC,EAAe,gBAAiB,CAC/C,SAAU,GACV,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,aAAc,GAClB,CAAC,EAEDJ,EAAW,iBAAiB,SAAUK,CAAY,EAElD,SAASA,EAAaC,EAAO,CACzBA,EAAM,eAAc,EACpB,MAAMrB,EAAQqB,EAAM,OAAO,SAAS,YAAY,MAAM,OAEtD,GAAI,CAACrB,EAAO,CACRsB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+BACT,SAAU,UACtB,CAAS,EACDD,EAAM,OAAO,QACb,MACH,CACDL,EAAQ,UAAY,GAEhBC,EAAO,UAAU,SAAS,QAAQ,EAClCA,EAAO,UAAU,QAAQ,SAAU,QAAQ,EAE3CA,EAAO,UAAU,IAAI,QAAQ,EAIjClB,EAAUC,CAAK,EACV,KAAKuB,GAAQ,CACV,GAAIA,EAAK,KAAK,SAAW,EAAG,CACxBD,EAAS,KAAK,CACV,MAAO,aACP,QAAS,0BACT,SAAU,UAC9B,CAAiB,EACD,MACH,CACD,MAAME,EAASlB,EAAiBiB,EAAK,IAAI,EACzCP,EAAQ,UAAYQ,EACpBN,EAAS,QAAO,CAC5B,CAAS,EACA,MAAMb,GAAS,CACZiB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,UAC1B,CAAa,CACb,CAAS,EACA,QAAQ,IAAM,CAEPL,EAAO,UAAU,SAAS,QAAQ,EAClCA,EAAO,UAAU,QAAQ,SAAU,QAAQ,EAE3CA,EAAO,UAAU,IAAI,QAAQ,EAIjCI,EAAM,OAAO,OACzB,CAAS,CACT"}